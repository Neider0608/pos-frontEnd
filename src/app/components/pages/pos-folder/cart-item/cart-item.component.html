@if (isTouchMode) {
    <p-card styleClass="p-3">
        <div class="flex items-start justify-between mb-3">
            <div class="flex-1 min-w-0">
                <h4 class="font-medium text-sm truncate">{{ item.name }}</h4>
                <p class="text-xs text-muted-foreground">{{ item.price | currency: 'USD' }} c/u</p>
                @if (item.discount > 0) {
                    <p-badge styleClass="text-xs mt-1" severity="secondary" value="-{{ item.discount }}% desc."></p-badge>
                }
            </div>
            <p-button (click)="onRemove()" icon="pi pi-trash" styleClass="p-button-ghost p-button-danger h-8 w-8"></p-button>
        </div>

        <div class="mb-3">
            <div class="flex items-center gap-2">
                <label class="text-xs text-muted-foreground whitespace-nowrap">Descuento:</label>
                <div class="flex items-center gap-1 flex-1">
                    <p-inputNumber [ngModel]="item.discount" (ngModelChange)="onUpdateDiscount($event)" [min]="0" [max]="100" placeholder="0" suffix=" %" inputStyleClass="h-9 text-center text-sm w-full"></p-inputNumber>
                </div>
            </div>
        </div>

        <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
                <p-button (click)="onUpdateQuantity(item.quantity - 1)" icon="pi pi-minus" styleClass="p-button-outlined h-9 w-9 bg-transparent"></p-button>
                <span class="w-10 text-center font-medium">{{ item.quantity }}</span>
                <p-button (click)="onUpdateQuantity(item.quantity + 1)" icon="pi pi-plus" styleClass="p-button-outlined h-9 w-9 bg-transparent"></p-button>
            </div>

            <div class="text-right">
                @if (item.discount > 0) {
                    <div class="text-xs text-muted-foreground line-through">
                        {{ item.price * item.quantity | currency: 'USD' }}
                    </div>
                }
                <div class="font-bold text-lg text-accent">{{ finalPrice | currency: 'USD' }}</div>
            </div>
        </div>
    </p-card>
} @else {
    <div class="grid grid-cols-[1fr_auto_auto_auto_auto_auto] items-center gap-4 py-3 border-b">
        <div class="flex-1 min-w-0">
            <div class="flex items-center gap-2">
                <p class="font-medium text-sm">{{ item.name }}</p>
                @if (item.hasDiscount) {
                    <p-badge severity="secondary" value="Promo" styleClass="text-xs"></p-badge>
                }
            </div>
            <p class="text-xs text-muted-foreground">{{ item.barcode }}</p>
        </div>

        <div class="w-32">
            <p-inputNumber
                [ngModel]="item.quantity"
                (ngModelChange)="onUpdateQuantity($event)"
                [showButtons]="true"
                buttonLayout="horizontal"
                [min]="0"
                inputStyleClass="w-10 text-center"
                decrementButtonClass="p-button-secondary"
                incrementButtonClass="p-button-secondary"
                incrementButtonIcon="pi pi-plus"
                decrementButtonIcon="pi pi-minus"
            >
            </p-inputNumber>
        </div>

        <div class="w-24 text-right">
            <span class="font-medium text-sm">{{ item.price | currency: 'USD' }}</span>
        </div>

        <div class="w-20">
            <p-inputNumber [ngModel]="item.discount" (ngModelChange)="onUpdateDiscount($event)" [min]="0" [max]="100" inputStyleClass="h-8 text-center text-sm w-full"> </p-inputNumber>
        </div>

        <div class="w-28 text-right">
            @if (item.discount > 0) {
                <div class="text-xs text-muted-foreground line-through">
                    {{ item.price * item.quantity | currency: 'USD' }}
                </div>
            }
            <div class="font-bold text-base">{{ finalPrice | currency: 'USD' }}</div>
        </div>

        <div class="w-8">
            <p-button (click)="onRemove()" icon="pi pi-trash" styleClass="p-button-ghost p-button-danger h-8 w-8"></p-button>
        </div>
    </div>
}
